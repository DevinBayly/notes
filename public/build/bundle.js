var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(t,e){t.appendChild(e)}function l(t){return document.createElement(t)}function s(){return t=" ",document.createTextNode(t);var t}function c(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function d(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function u(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}let p;function h(t){p=t}const f=[],m=[],g=[],y=[],b=Promise.resolve();let v=!1;function w(t){g.push(t)}let $=!1;const k=new Set;function x(){if(!$){$=!0;do{for(let t=0;t<f.length;t+=1){const e=f[t];h(e),C(e.$$)}for(f.length=0;m.length;)m.pop()();for(let t=0;t<g.length;t+=1){const e=g[t];k.has(e)||(k.add(e),e())}g.length=0}while(f.length);for(;y.length;)y.pop()();v=!1,$=!1,k.clear()}}function C(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(w)}}const T=new Set;function _(t,e){-1===t.$$.dirty[0]&&(f.push(t),v||(v=!0,b.then(x)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function A(a,r,l,s,c,d,u=[-1]){const f=p;h(a);const m=r.props||{},g=a.$$={fragment:null,ctx:null,props:d,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:u};let y=!1;var b,v;g.ctx=l?l(a,m,(t,e,...n)=>{const o=n.length?n[0]:e;return g.ctx&&c(g.ctx[t],g.ctx[t]=o)&&(g.bound[t]&&g.bound[t](o),y&&_(a,t)),e}):[],g.update(),y=!0,o(g.before_update),g.fragment=!!s&&s(g.ctx),r.target&&(r.hydrate?g.fragment&&g.fragment.l(function(t){return Array.from(t.childNodes)}(r.target)):g.fragment&&g.fragment.c(),r.intro&&((b=a.$$.fragment)&&b.i&&(T.delete(b),b.i(v))),function(t,n,a){const{fragment:r,on_mount:l,on_destroy:s,after_update:c}=t.$$;r&&r.m(n,a),w(()=>{const n=l.map(e).filter(i);s?s.push(...n):o(n),t.$$.on_mount=[]}),c.forEach(w)}(a,r.target,r.anchor),x()),h(f)}var j,E,I="AIzaSyAIYCyk2KaSfTyX67jJuNKYo-AZAtwwZ-U",S=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"];function L(){gapi.client.init({apiKey:I,clientId:"541857836176-ooorj15vavsg5e0h0c98jodmp5lt39js.apps.googleusercontent.com",discoveryDocs:S,scope:"https://www.googleapis.com/auth/drive"}).then((function(){gapi.auth2.getAuthInstance().isSignedIn.listen(N),N(gapi.auth2.getAuthInstance().isSignedIn.get()),j.onclick=O,E.onclick=D}),(function(t){var e,n,o;e=JSON.stringify(t,null,2),n=document.getElementById("content"),o=document.createTextNode(e+"\n"),n.appendChild(o)}))}function N(t){t?(j.style.display="none",E.style.display="block",gapi.client.drive.files.list({pageSize:10,fields:"nextPageToken, files(id, name)"}).then((function(t){var e=t.result.files;if(e&&e.length>0)for(var n=0;n<e.length;n++){var o=e[n];"notes.json"==o.name&&(z=o.id)}}))):(j.style.display="block",E.style.display="none")}function O(t){gapi.auth2.getAuthInstance().signIn()}function D(t){gapi.auth2.getAuthInstance().signOut()}let z;let B=()=>{let t='--uploadboundary\nContent-Disposition:form-data;name="metadata";filename="first"\nContent-Type: application/json; charset=UTF-8\n\n{"name":"notes.json","mimeType":"application/json"}\n',e=`--uploadboundary\nContent-Disposition:form-data;name="file";filename="blob"\nContent-Type: application/json\n\n${JSON.stringify({starting:"text"})}\n--uploadboundary--\n    `;fetch(`https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&api=${I}&fields=id`,{method:"POST",headers:{"Content-type":"multipart/related; boundary=uploadboundary","Content-Length":(t+e).length,Authorization:"Bearer "+gapi.auth.getToken().access_token},body:t+e}).then(t=>t.json()).then(t=>console.log(t))},J=()=>fetch(`https://www.googleapis.com/drive/v3/files/${z}/?key=${I}&alt=media`,{}),P=t=>{z?(console.log("updating"),(t=>{let e='--uploadboundary\nContent-Disposition:form-data;name="metadata";filename="first"\nContent-Type: application/json; charset=UTF-8\n\n{"name":"notes.json","mimeType":"application/json"}\n',n=`--uploadboundary\nContent-Disposition:form-data;name="file";filename="blob"\nContent-Type: application/json\n\n${JSON.stringify(t)}\n--uploadboundary--`;fetch(`https://www.googleapis.com/upload/drive/v3/files/${z}/?uploadType=multipart&key=${I}&fields=id`,{method:"PATCH",headers:{"Content-type":"multipart/related; boundary=uploadboundary","Content-Length":(e+n).length,Authorization:"Bearer "+gapi.auth.getToken().access_token},body:e+n}).then(t=>t.json()).then(t=>console.log(t))})(t)):(console.log("creating anew"),B())};function H(e){let n,i,a,p,h,f,m,g,y,b,v,w,$,k,x,C,T,_,A;return{c(){n=l("div"),i=l("p"),i.textContent="Drive API Quickstart",a=s(),p=l("button"),p.textContent="creatfile",h=s(),f=l("button"),f.textContent="makenew",m=s(),g=l("button"),g.textContent="getfile",y=s(),b=l("button"),b.textContent="Authorize",v=s(),w=l("button"),w.textContent="Sign Out",$=s(),k=l("pre"),x=s(),C=l("div"),C.innerHTML='<canvas id="the-canvas"></canvas>',T=s(),_=l("canvas"),d(b,"id","authorize_button"),u(b,"display","none"),d(w,"id","signout_button"),u(w,"display","none"),d(k,"id","content"),u(k,"white-space","pre-wrap"),d(C,"id","pdfcontainer"),d(_,"id","canvas")},m(t,e){!function(t,e,n){t.insertBefore(e,n||null)}(t,n,e),r(n,i),r(n,a),r(n,p),r(n,h),r(n,f),r(n,m),r(n,g),r(n,y),r(n,b),r(n,v),r(n,w),r(n,$),r(n,k),r(n,x),r(n,C),r(n,T),r(n,_),A=[c(p,"click",P),c(f,"click",B),c(g,"click",J)]},p:t,i:t,o:t,d(t){var e;t&&(e=n).parentNode.removeChild(e),o(A)}}}let M=()=>({ele:document.createElement("textarea"),holder:document.createElement("div"),init(){this.holder.id="textholder",this.holder.append(this.ele),this.ele.addEventListener("keydown",this.keycheck.bind(this)),this.ele.style.height="400px",this.ele.style.width="90%",document.body.append(this.holder)},keycheck(t){if("Control"==t.key){let e=this.ele.selectionStart,n=""+new Date;this.ele.value.match(/--date--/)&&(this.ele.value=this.ele.value.replace(/--date--/,""+n),t.preventDefault(),this.ele.selectionstart=e+n.length,this.ele.selectionend=e+n.length)}}});class K{constructor(){let t=M();t.init(),J().then(t=>t.json()).then(e=>{JSON.parse(e).map(e=>{t.ele.value+=e.value})})}}class U{constructor(){this.btn=document.createElement("button"),document.body.prepend(this.btn),this.btn.addEventListener("click",()=>{this.load()}),this.btn.id="reload",this.btn.innerHTML="Load prev data"}load(){new K}}class q{constructor(){this.btn=document.createElement("button"),this.btn.innerHTML="Download",this.btn.id="download",this.btn.addEventListener("click",()=>{let t=this.retrieveInfo();P(JSON.stringify(t))}),document.body.prepend(this.btn)}retrieveInfo(){return Array(...document.querySelectorAll("textarea")).map(t=>({value:t.value}))}}const F=new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}{constructor(t){super(),A(this,t,null,H,a,{})}}({target:document.body,props:{name:"world"}});return window.onload=()=>{j=document.getElementById("authorize_button"),E=document.getElementById("signout_button"),gapi.load("client:auth2",L),new q,new U},F}();
//# sourceMappingURL=bundle.js.map
